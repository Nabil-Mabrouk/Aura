{% extends "core/base.html" %}

{% block content %}
<div class="flex justify-between items-center mb-4">
    <h2 class="text-2xl font-semibold">Operational Jobs</h2>
    <form action="{% url 'core:create_and_run_job' %}" method="post">
        {% csrf_token %}
        <button type="submit" class="bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-2 px-4 rounded">
            + Start New Job
        </button>
    </form>
</div>

<div class="bg-gray-800 rounded-lg shadow">
    <ul class="divide-y divide-gray-700">
        {% for job in jobs %}
            <a href="{% url 'core:job_detail' job.id %}" class="block p-4 hover:bg-gray-700">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="font-mono text-sm text-gray-400">JOB ID: {{ job.id }}</p>
                        <p class="text-lg font-semibold">{{ job.title }}</p>
                    </div>
                    <span class="px-3 py-1 text-sm font-semibold rounded-full
                        {% if job.status == 'COMPLETED' %} bg-green-500/20 text-green-400
                        {% elif job.status == 'IN_PROGRESS' %} bg-yellow-500/20 text-yellow-400
                        {% elif job.status == 'FAILED' %} bg-red-500/20 text-red-400
                        {% else %} bg-gray-500/20 text-gray-400
                        {% endif %}">
                        {{ job.get_status_display }}
                    </span>
                </div>
            </a>
        {% empty %}
            <p class="p-4 text-gray-500">No jobs have been started yet.</p>
        {% endfor %}
    </ul>
</div>
{% endblock %}